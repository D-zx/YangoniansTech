{% extends '../base.html'%}
{% load charity_tag %}
{% block head%}
  <title>{{request.GET.type|services_title|title}}s | YangoniansTech</title>
{%endblock%}

{% block body%}
	<h4 class='services-header'>{{types|list_value:request.GET.type}}</h4>
	<form class="search-form">
		<div class="row">
			<div class="select2-input col s12 m5 l3">
				<label for="type">အမျိုးအစားများ</label>
					<select id="type" name="type">
						<option value="">အားလုံး</option>
						{%for value, name in types%}
						<option value="{{value}}">{{name|title}}</option>
						{%endfor%}
					</select>	
			</div>
			<div class="select2-input col s12 m5 l3">
				<label for="township">မြို့နယ်</label>
					<select id="township" name="township">
						<option value="" disabled>ရှာဖွေလိုသောမြို့နယ်</option>
						{%for value, name in townships%}
						<option value="{{value}}">{{name|title}}</option>
						{%endfor%}
					</select>
			</div>
			<div class="input-field col s12 m5 l3" style="display: none;">
				<select class="region" name="region">
					{%for value, name in regions%}
					<option value="{{value}}">{{name|title}}</option>
					{%endfor%}
				</select>
				<label>ပြည်နယ်/တိုင်း</label>
			</div>
		</div>	
	</form>

	<div class="row service-list">
	{%for service in object_list%}
	{%if service%}
		<div class="col s12 m6 l4">
			<div class="card blue-grey darken-1">
				<div class="card-content white-text">
					<span class="card-title">{{service.name|title}}</span>
					<!-- {{service.is_open|safe}} -->
					<dl class="row">
						<dt class="col s2 center"><i class="fas fa-tasks fa-lg"></i></dt>
						<dd class="col s10">{{service.get_s_type_display}}</dd>
					</dl>
					{%if service.location%}
					<dl class="row">
						<dt class="col s2 center"><i class="fas fa-map-marked-alt fa-lg"></i></dt>
						<dd class="col s10">{{service.address}}</dd>
					</dl>
					{%else%}
					<dl class="row">
						<dt class="col s2 center"><i class="fas fa-map-marked-alt fa-lg"></i></dt>
						<dd class="col s10">{{service.get_region_display}}</dd>
					</dl>
					{%endif%}
					<dl class="row">
						<dt class="col s2 center"><i class="far fa-calendar-alt fa-lg"></i></dt>
						<dd class="col s10">
							<ul>
								{%for oh in service.openinghour_set.all%}
									<li>{{oh}}</li>
								{%endfor%}
							</ul>
						</dd>
					</dl>
					<dl class="row">
						<dt class="col s2 center"><i class="fas fa-phone-alt fa-lg"></i></dt>
						<dd class="col s10">
							{%for phone in service.phone%}
							<ul>
								<li><a href="tel:{{phone}}">{{phone}}</a></li>
							</ul>
							{%endfor%}
						</dd>	
					</dl>
					{%if service.description%}
					<dl class="row">
						<dt class="col s2 center"><i class="far fa-clipboard fa-lg"></i></dt>
						<dd class="col s10"><p>{{service.description}}</p></dd>
					</dl>
					{%endif%}
				</div>
			</div>
		</div>
	{%else%}
	<p>We will update more informations soon.</p>
	{%endif%}
	{%endfor%}
	</div>

	<script type="text/javascript">
		$(document).ready(function(){
		    $('#township').val("{{request.GET.township}}")
		   	var region = "{{request.GET.region}}"
		   	if (region){
			    $('#region').val(region)
		   	}
			var type = "{{request.GET.type}}"
			if (type == 'hotline'){
				$('#township').parent().css('display', 'none');
			}else{
				$('#township').parent().css('display', 'block');
			}
		    $('#type').val("{{request.GET.type}}")
		    $('select').select2({
				minimumResultsForSearch: Infinity,
				width: '95%',
				});
		    $('select').on('change', function(){
				if ($('#type').val() == 'hotline'){
					$('#township').val('')
				}
		    	$('form').submit();
		    });
		  });
		        
	</script>

{%endblock%}


